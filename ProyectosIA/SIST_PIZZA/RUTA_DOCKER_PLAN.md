โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                                                                              โ
โ         ๐ณ RUTA DOCKER - SETUP COMPLETO (4-5 HORAS)                        โ
โ                                                                              โ
โ         docker-compose con 6 servicios - Deployable a producciรณn            โ
โ                                                                              โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
๐ฆ SERVICIOS QUE CONFIGURAREMOS
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

1. PostgreSQL (BD local)
   โโ Puerto: 5432
   โโ User: pizza_user
   โโ Pass: pizza_password
   โโ DB: pizza_db

2. Redis (Cache + Message Queue)
   โโ Puerto: 6379
   โโ Sin autenticaciรณn (desarrollo)

3. WAHA (WhatsApp Web Automation)
   โโ Puerto: 3000
   โโ Para recibir/enviar mensajes WhatsApp
   โโ Conecta con N8N

4. N8N (Workflow Orchestration)
   โโ Puerto: 5678
   โโ Para procesar mensajes + llamar backend
   โโ Conecta con WAHA, Backend, Claude AI

5. Chatwoot (Customer Support CRM)
   โโ Puerto: 3000 (interno)
   โโ Base de datos propia
   โโ Para gestionar tickets de soporte

6. Backend (Node.js App)
   โโ Puerto: 4000
   โโ Conecta con PostgreSQL local
   โโ Procesa webhooks de N8N

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โฑ๏ธ TIMELINE
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

Paso 1: docker-compose.yml        1 hora
Paso 2: Configuraciรณn .env        30 minutos
Paso 3: Dockerfile del backend    30 minutos
Paso 4: Health checks             30 minutos
Paso 5: Testing e2e               1 hora
Paso 6: Documentaciรณn deploy      30 minutos
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
TOTAL:                           4-5 horas

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
๐ ESTRUCTURA DE ARCHIVOS
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

docker-compose.yml          โ El archivo principal
.env.docker                 โ Variables de entorno
Dockerfile                  โ Para backend Node.js
docker/
โโโ postgres/
โ   โโโ Dockerfile          โ PostgreSQL customizado
โ   โโโ init.sql            โ SQL inicial
โโโ redis/
โ   โโโ redis.conf          โ Configuraciรณn Redis
โโโ waha/
โ   โโโ docker-compose.yml  โ WAHA config
โโโ n8n/
โ   โโโ workflows.json      โ Workflows predefinidos
โ   โโโ settings.json       โ Configuraciรณn N8N
โโโ chatwoot/
    โโโ docker-compose.yml  โ Chatwoot dependencias

SCRIPTS:
โโโ docker-build.sh         โ Build de imรกgenes
โโโ docker-start.sh         โ Iniciar servicios
โโโ docker-stop.sh          โ Detener servicios
โโโ docker-logs.sh          โ Ver logs

DOCUMENTACIรN:
โโโ DOCKER_SETUP.md         โ Instrucciones completas
โโโ DOCKER_NETWORKING.md    โ Cรณmo se comunican servicios
โโโ DEPLOYMENT_GUIDE.md     โ Guรญa de producciรณn

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
๐๏ธ ARQUITECTURA CON DOCKER
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                         CONTENEDOR DOCKER                              โ
โ                                                                         โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ  โ                    DOCKER NETWORK                               โ  โ
โ  โ                   (sist-pizza-network)                          โ  โ
โ  โ                                                                  โ  โ
โ  โ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโ  โโโโโโโโโโโ  โโโโโโโโโโโโโโโโ โ  โ
โ  โ  โ PostgreSQL  โ  โ  Redis   โ  โ  WAHA   โ  โ     N8N      โ โ  โ
โ  โ  โ   :5432     โ  โ  :6379   โ  โ  :3000  โ  โ    :5678     โ โ  โ
โ  โ  โ  pizza_db   โ  โ  Cache   โ  โ WhatsAppโ  โ  Workflows   โ โ  โ
โ  โ  โโโโโโโโฌโโโโโโโ  โโโโโโฌโโโโโโ  โโโโโโฌโโโโโ  โโโโโโโโฌโโโโโโโโ โ  โ
โ  โ         โ               โ             โ               โ         โ  โ
โ  โ         โโโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโ         โ  โ
โ  โ                         โ             โ                         โ  โ
โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโดโโโโโโโโโโโโโโดโโโโโโโโโโโโโโโโโโโโโโ  โ  โ
โ  โ  โ                   Backend (Node.js)                      โ  โ  โ
โ  โ  โ                      :4000                               โ  โ  โ
โ  โ  โ   (Conecta a todos: BD, Redis, recibe de N8N)           โ  โ  โ
โ  โ  โ                                                          โ  โ  โ
โ  โ  โ  POST /api/webhooks/n8n/pedido โโ N8N                   โ  โ  โ
โ  โ  โ         โ                                                โ  โ  โ
โ  โ  โ  Procesa pedido                                          โ  โ  โ
โ  โ  โ         โ                                                โ  โ  โ
โ  โ  โ  Guarda en PostgreSQL                                    โ  โ  โ
โ  โ  โ         โ                                                โ  โ  โ
โ  โ  โ  Respuesta JSON                                          โ  โ  โ
โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ  โ
โ  โ                                                                  โ  โ
โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ  โ
โ  โ  โ           Chatwoot (Soporte)                            โ   โ  โ
โ  โ  โ          :3000 (interno)                                โ   โ  โ
โ  โ  โ   (Integraciรณn futura con tickets/soporte)              โ   โ  โ
โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ  โ
โ  โ                                                                  โ  โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ                                                                         โ
โ  Puertos expuestos:                                                    โ
โ  - localhost:5432 โ PostgreSQL                                         โ
โ  - localhost:6379 โ Redis                                              โ
โ  - localhost:3000 โ WAHA                                               โ
โ  - localhost:5678 โ N8N                                                โ
โ  - localhost:4000 โ Backend                                            โ
โ                                                                         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
๐ CรMO USAR DOCKER
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

PREPARACIรN (Primera vez - 10 min):

1. Instala Docker Desktop:
   https://www.docker.com/products/docker-desktop

2. Inicia Docker Desktop (desde Applications)

3. Verifica instalaciรณn:
   $ docker --version
   $ docker-compose --version

EJECUTAR SISTEMA (2 minutos):

1. Navega a proyecto:
   $ cd /home/eevan/ProyectosIA/SIST_PIZZA

2. Inicia todos los servicios:
   $ docker-compose up -d

3. Espera 30 segundos a que todo inicie

4. Verifica que estรกn corriendo:
   $ docker-compose ps

   Deberรญas ver:
   NAME                      STATUS
   sist-pizza-db-1          Up 30s
   sist-pizza-redis-1       Up 30s
   sist-pizza-backend-1     Up 30s
   sist-pizza-waha-1        Up 30s
   sist-pizza-n8n-1         Up 30s

5. Prueba que funciona:
   $ curl http://localhost:4000/health

   Respuesta:
   {"status":"ok"}

DETENER (1 minuto):

$ docker-compose down

VER LOGS:

$ docker-compose logs -f backend
$ docker-compose logs -f n8n
$ docker-compose logs -f redis

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
๐ PASO A PASO - CREAR docker-compose.yml
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

El archivo docker-compose.yml contiene:

version: '3.9'

services:
  # 1. PostgreSQL
  db:
    image: postgres:15
    environment:
      POSTGRES_USER: pizza_user
      POSTGRES_PASSWORD: pizza_password
      POSTGRES_DB: pizza_db
    volumes:
      - postgres_data:/var/lib/postgresql/data
    ports:
      - "5432:5432"
    healthcheck:
      test: ["CMD", "pg_isready", "-U", "pizza_user"]
      interval: 10s
      timeout: 5s
      retries: 5

  # 2. Redis
  redis:
    image: redis:7-alpine
    ports:
      - "6379:6379"
    healthcheck:
      test: ["CMD", "redis-cli", "ping"]
      interval: 10s
      timeout: 5s
      retries: 5

  # 3. Backend Node.js
  backend:
    build: .
    ports:
      - "4000:4000"
    environment:
      DATABASE_URL: postgresql://pizza_user:pizza_password@db:5432/pizza_db
      SUPABASE_URL: ...  (tu URL)
      SUPABASE_KEY: ...  (tu key)
      REDIS_URL: redis://redis:6379
      NODE_ENV: development
    depends_on:
      - db
      - redis
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:4000/health"]
      interval: 10s
      timeout: 5s
      retries: 5

  # 4. WAHA (WhatsApp)
  waha:
    image: devlikeapro/waha:latest
    ports:
      - "3000:3000"
    environment:
      WAHA_WEBHOOK_URL: http://n8n:5678
    depends_on:
      - n8n

  # 5. N8N (Workflows)
  n8n:
    image: n8nio/n8n:latest
    ports:
      - "5678:5678"
    environment:
      DB_TYPE: postgres
      DB_HOST: db
      DB_NAME: pizza_db
      DB_USER: pizza_user
      DB_PASSWORD: pizza_password
      N8N_EDITOR_BASE_URL: http://localhost:5678
      N8N_INSTANCE_IP_ADDRESS: 0.0.0.0
    depends_on:
      - db

volumes:
  postgres_data:

networks:
  default:
    name: sist-pizza-network

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โจ BENEFICIOS DE DOCKER
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โ Mismo ambiente en desarrollo que en producciรณn
โ No necesita instalar PostgreSQL, Redis, N8N manualmente
โ Fรกcil de compartir (solo compartir docker-compose.yml)
โ Escalable (agregar mรกs backends, rรฉplicas, etc)
โ Limpio (todo en contenedores, no ensucia la mรกquina)
โ Listo para CI/CD (GitHub Actions, GitLab, etc)

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
๐ฏ PRรXIMAS FASES DESPUรS DE DOCKER
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

1. Kubernetes (si necesitas escala masiva)
2. GitHub Actions (CI/CD automรกtico)
3. Monitoreo (Prometheus + Grafana)
4. Alertas (Alertmanager)
5. Backups automรกticos

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
๐ก PRรXIMO PASO
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

ยฟQuieres que comience con Docker setup? ๐ณ

Yo crearรฉ:
1. docker-compose.yml (completo)
2. Dockerfile para backend
3. .env.docker (configuraciรณn)
4. DOCKER_SETUP.md (guรญa completa)
5. docker-start.sh y docker-stop.sh (scripts helper)

Resultado: Sistema Docker listo para:
- Desarrollo local
- Testing en containers
- Deployment a servidor
- Escalado horizontal

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
